### Solana Pay Checkout API Tests

# Variables
@baseUrl = http://localhost:4000/v1/stores
@storeId = your-store-id-here
@productId = your-product-id-here
@customerWallet = 9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM

### 1. Create Checkout Session (SOL Payment)
POST {{baseUrl}}/{{storeId}}/checkout
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 1,
  "customerWallet": "{{customerWallet}}",
  "customerEmail": "customer@example.com",
  "currency": "SOL"
}

### 2. Create Checkout Session (USDC Payment)
POST {{baseUrl}}/{{storeId}}/checkout
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 2,
  "customerWallet": "{{customerWallet}}",
  "customerEmail": "customer@example.com",
  "currency": "USDC"
}

### 3. Verify Payment
POST {{baseUrl}}/{{storeId}}/checkout/verify
Content-Type: application/json

{
  "orderId": "order-id-from-checkout-response",
  "signature": "optional-transaction-signature"
}

### 4. Get Checkout Status
GET {{baseUrl}}/{{storeId}}/checkout/order-id-here/status

### 5. Example: Complete Checkout Flow

# Step 1: Create checkout session
POST {{baseUrl}}/{{storeId}}/checkout
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 1,
  "customerWallet": "{{customerWallet}}",
  "customerEmail": "test@example.com",
  "currency": "SOL"
}

# Step 2: Customer scans QR code or uses payment URL from response
# Step 3: Verify payment (can be called multiple times to check status)
# POST {{baseUrl}}/{{storeId}}/checkout/verify with orderId from step 1

# Step 4: Check final status
# GET {{baseUrl}}/{{storeId}}/checkout/{orderId}/status

### Error Cases

# Invalid wallet address
POST {{baseUrl}}/{{storeId}}/checkout
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 1,
  "customerWallet": "invalid-wallet",
  "currency": "SOL"
}

# Non-existent product
POST {{baseUrl}}/{{storeId}}/checkout
Content-Type: application/json

{
  "productId": "non-existent-product-id",
  "quantity": 1,
  "customerWallet": "{{customerWallet}}",
  "currency": "SOL"
}

# Insufficient stock
POST {{baseUrl}}/{{storeId}}/checkout
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 999999,
  "customerWallet": "{{customerWallet}}",
  "currency": "SOL"
}