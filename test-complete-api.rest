### Complete SolStore API Test Suite

# Variables
@baseUrl = http://localhost:4000/v1
@authToken = your-jwt-token-here
@storeId = your-store-id-here
@productId = your-product-id-here
@orderId = your-order-id-here
@walletAddress = 9WzDXwBbmkg8ZTbNMqUxvQRAyrZzDsGYdLVL9zYtAWWM

### 1. AUTHENTICATION ENDPOINTS

# Connect Wallet
POST {{baseUrl}}/auth/wallet/connect
Content-Type: application/json

{
  "walletAddress": "{{walletAddress}}",
  "signature": "signature_here_min_64_chars_long_for_validation_to_pass_successfully",
  "message": "Sign in to SolStore"
}

### Verify Token
GET {{baseUrl}}/auth/verify
Authorization: Bearer {{authToken}}

### 2. FILE UPLOAD ENDPOINTS

# Upload Store Icon
POST {{baseUrl}}/upload/store-icon
Authorization: Bearer {{authToken}}
Content-Type: multipart/form-data

# Note: Use a REST client that supports file uploads
# Add file: icon=@path/to/icon.png

### Upload Store Banner
POST {{baseUrl}}/upload/store-banner
Authorization: Bearer {{authToken}}
Content-Type: multipart/form-data

# Note: Use a REST client that supports file uploads
# Add file: banner=@path/to/banner.jpg

### Delete File
DELETE {{baseUrl}}/upload/file/file-key-here
Authorization: Bearer {{authToken}}

### 3. STORE MANAGEMENT ENDPOINTS

# Create Store
POST {{baseUrl}}/stores
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "storeName": "My Awesome Store",
  "storeSlug": "my-awesome-store",
  "storeIcon": "https://utfs.io/f/uploaded-icon-key",
  "storeBanner": "https://utfs.io/f/uploaded-banner-key",
  "description": "This is my awesome digital store"
}

### Get User Stores
GET {{baseUrl}}/stores
Authorization: Bearer {{authToken}}

### Get Store by Slug (Public)
GET {{baseUrl}}/stores/my-awesome-store

### Update Store
PUT {{baseUrl}}/stores/{{storeId}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "name": "Updated Store Name",
  "description": "Updated description",
  "settings": {
    "currency": "SOL",
    "language": "English",
    "timezone": "UTC",
    "theme": "dark",
    "notifications": {
      "email": true,
      "sms": false,
      "push": true
    },
    "privacy": {
      "storeVisible": true,
      "requireLogin": false
    }
  }
}

### Delete Store
DELETE {{baseUrl}}/stores/{{storeId}}
Authorization: Bearer {{authToken}}

### 4. PRODUCT MANAGEMENT ENDPOINTS

# Create Product
POST {{baseUrl}}/stores/{{storeId}}/products
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "name": "Digital Art Collection #1",
  "description": "Exclusive digital art pieces for collectors",
  "price": 2.5,
  "currency": "SOL",
  "category": "Digital Art",
  "stock": "unlimited",
  "images": ["https://utfs.io/f/image1", "https://utfs.io/f/image2"],
  "status": "active",
  "metadata": {
    "downloadUrl": "https://example.com/download",
    "fileSize": "10MB",
    "fileType": "ZIP"
  }
}

### Get Store Products
GET {{baseUrl}}/stores/{{storeId}}/products?page=1&limit=20&status=active&search=art
Authorization: Bearer {{authToken}}

### Get Store Products (Public)
GET {{baseUrl}}/stores/{{storeId}}/products?page=1&limit=20

### Get Single Product
GET {{baseUrl}}/stores/{{storeId}}/products/{{productId}}

### Update Product
PUT {{baseUrl}}/stores/{{storeId}}/products/{{productId}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "name": "Updated Product Name",
  "description": "Updated description",
  "price": 3.0,
  "stock": 100,
  "status": "active"
}

### Delete Product
DELETE {{baseUrl}}/stores/{{storeId}}/products/{{productId}}
Authorization: Bearer {{authToken}}

### 5. ORDER MANAGEMENT ENDPOINTS

# Create Order (Public)
POST {{baseUrl}}/stores/{{storeId}}/orders
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 1,
  "customerEmail": "customer@example.com",
  "customerWallet": "{{walletAddress}}",
  "paymentMethod": "solana"
}

### Get Store Orders
GET {{baseUrl}}/stores/{{storeId}}/orders?page=1&limit=20&status=completed&search=customer
Authorization: Bearer {{authToken}}

### Get Single Order
GET {{baseUrl}}/stores/{{storeId}}/orders/{{orderId}}
Authorization: Bearer {{authToken}}

### Update Order Status
PUT {{baseUrl}}/stores/{{storeId}}/orders/{{orderId}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "status": "completed",
  "paymentTxHash": "5KJp7z8abc123def456ghi789jkl012mno345pqr678stu901vwx234yz567"
}

### 6. SOLANA PAY CHECKOUT ENDPOINTS

# Create Checkout Session (SOL)
POST {{baseUrl}}/stores/{{storeId}}/checkout
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 1,
  "customerWallet": "{{walletAddress}}",
  "customerEmail": "customer@example.com",
  "currency": "SOL"
}

### Create Checkout Session (USDC)
POST {{baseUrl}}/stores/{{storeId}}/checkout
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 2,
  "customerWallet": "{{walletAddress}}",
  "customerEmail": "customer@example.com",
  "currency": "USDC"
}

### Verify Payment
POST {{baseUrl}}/stores/{{storeId}}/checkout/verify
Content-Type: application/json

{
  "orderId": "order-id-from-checkout-response",
  "signature": "optional-transaction-signature"
}

### Get Checkout Status
GET {{baseUrl}}/stores/{{storeId}}/checkout/{{orderId}}/status

### 7. ANALYTICS ENDPOINTS

# Get Store Analytics (7 days)
GET {{baseUrl}}/stores/{{storeId}}/analytics?period=7d
Authorization: Bearer {{authToken}}

### Get Store Analytics (30 days)
GET {{baseUrl}}/stores/{{storeId}}/analytics?period=30d
Authorization: Bearer {{authToken}}

### Get Store Analytics (90 days)
GET {{baseUrl}}/stores/{{storeId}}/analytics?period=90d
Authorization: Bearer {{authToken}}

### Get Store Analytics (1 year)
GET {{baseUrl}}/stores/{{storeId}}/analytics?period=1y
Authorization: Bearer {{authToken}}

### 8. HEALTH CHECK ENDPOINTS

# Health Check
GET {{baseUrl}}/../health

### API Info
GET {{baseUrl}}/..

### 9. ERROR TESTING

# Invalid wallet address
POST {{baseUrl}}/auth/wallet/connect
Content-Type: application/json

{
  "walletAddress": "invalid-wallet",
  "signature": "short",
  "message": "Sign in to SolStore"
}

### Non-existent store
GET {{baseUrl}}/stores/non-existent-store

### Unauthorized access
GET {{baseUrl}}/stores
# No Authorization header

### Invalid product data
POST {{baseUrl}}/stores/{{storeId}}/products
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "name": "",
  "price": -1,
  "currency": "INVALID"
}

### Out of stock order
POST {{baseUrl}}/stores/{{storeId}}/orders
Content-Type: application/json

{
  "productId": "{{productId}}",
  "quantity": 999999,
  "customerWallet": "{{walletAddress}}",
  "paymentMethod": "solana"
}

### 10. PAGINATION TESTING

# Test pagination limits
GET {{baseUrl}}/stores/{{storeId}}/products?page=1&limit=5
Authorization: Bearer {{authToken}}

### Test large page number
GET {{baseUrl}}/stores/{{storeId}}/products?page=999&limit=20
Authorization: Bearer {{authToken}}

### Test invalid pagination
GET {{baseUrl}}/stores/{{storeId}}/products?page=0&limit=101
Authorization: Bearer {{authToken}}

### 11. SEARCH AND FILTERING

# Search products
GET {{baseUrl}}/stores/{{storeId}}/products?search=digital&category=art&status=active
Authorization: Bearer {{authToken}}

### Search orders
GET {{baseUrl}}/stores/{{storeId}}/orders?search=customer@example.com&status=completed
Authorization: Bearer {{authToken}}

### Filter by status
GET {{baseUrl}}/stores/{{storeId}}/products?status=draft
Authorization: Bearer {{authToken}}

### 12. COMPLETE WORKFLOW TEST

# Step 1: Connect wallet and get token
POST {{baseUrl}}/auth/wallet/connect
Content-Type: application/json

{
  "walletAddress": "{{walletAddress}}",
  "signature": "signature_here_min_64_chars_long_for_validation_to_pass_successfully",
  "message": "Sign in to SolStore"
}

# Step 2: Create store (use token from step 1)
# POST {{baseUrl}}/stores with store data

# Step 3: Create product (use storeId from step 2)
# POST {{baseUrl}}/stores/{storeId}/products with product data

# Step 4: Create checkout session (use productId from step 3)
# POST {{baseUrl}}/stores/{storeId}/checkout with checkout data

# Step 5: Verify payment (use orderId from step 4)
# POST {{baseUrl}}/stores/{storeId}/checkout/verify with order data

# Step 6: Check analytics
# GET {{baseUrl}}/stores/{storeId}/analytics